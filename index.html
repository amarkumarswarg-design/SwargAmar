<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swarg - Social Media</title>
    <style>
        /* General Styles */
        body { font-family: Arial, sans-serif; background-color: #f0f2f5; margin: 0; }
        .hidden { display: none !important; }
        
        /* Auth Styles (Login/Register) */
        #auth-container { max-width: 400px; margin: 50px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .tab-btn { width: 48%; padding: 10px; cursor: pointer; border: none; background: #ddd; }
        .active-tab { background: #1877f2; color: white; }
        input { width: 95%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        .main-btn { width: 100%; padding: 12px; background: #1877f2; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        /* Main App Styles */
        header { background: #1877f2; color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .search-bar { padding: 8px; border-radius: 20px; border: none; width: 200px; }
        
        .container { max-width: 600px; margin: 20px auto; }
        
        /* Stories */
        .stories { display: flex; overflow-x: auto; background: white; padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ddd; }
        .story-card { text-align: center; margin-right: 15px; flex-shrink: 0; }
        .story-img { width: 60px; height: 60px; border-radius: 50%; border: 3px solid #1877f2; object-fit: cover; }
        .story-card p { font-size: 12px; margin-top: 5px; }

        /* Create Post */
        .create-post { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 20px; }
        textarea { width: 95%; height: 60px; border: 1px solid #ddd; border-radius: 5px; padding: 10px; resize: none; }

        /* Feed Posts */
        .post { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px; }
        .post-header { display: flex; align-items: center; margin-bottom: 10px; font-weight: bold; }
        .post-img { width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; background: #eee; }
        .post-actions { border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px; display: flex; gap: 20px; }
        .action-btn { cursor: pointer; color: #65676b; font-weight: 600; background: none; border: none; }
        
        /* Search Results */
        #search-results { background: white; position: absolute; top: 50px; width: 200px; border-radius: 5px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .search-item { padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; }
    </style>
</head>
<body>

    <div id="auth-container">
        <h2 style="text-align:center; color:#1877f2;">Swarg</h2>
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <button id="loginTab" class="tab-btn active-tab" onclick="toggleAuth('login')">Login</button>
            <button id="regTab" class="tab-btn" onclick="toggleAuth('reg')">Register</button>
        </div>

        <div id="login-form">
            <input type="text" id="loginUser" placeholder="Username">
            <input type="password" id="loginPass" placeholder="Password">
            <button class="main-btn" onclick="handleLogin()">Log In</button>
        </div>

        <div id="reg-form" class="hidden">
            <input type="text" id="regName" placeholder="Full Name">
            <input type="text" id="regUser" placeholder="Choose Username">
            <input type="password" id="regPass" placeholder="Create Password">
            <input type="date" id="regDob">
            <p style="font-size: 12px; color: grey;">Profile Photo URL (Optional):</p>
            <input type="text" id="regPic" placeholder="https://image-link.com">
            <button class="main-btn" onclick="handleRegister()">Register</button>
        </div>
    </div>

    <div id="main-app" class="hidden">
        <header>
            <h2 style="margin:0;">Swarg</h2>
            <div style="position:relative;">
                <input type="text" class="search-bar" id="searchInput" placeholder="Search Swarg..." onkeyup="handleSearch()">
                <div id="search-results" class="hidden"></div>
            </div>
            <button onclick="handleLogout()" style="background:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;">Logout</button>
        </header>

        <div class="container">
            <div class="stories" id="storyContainer">
                <div class="story-card">
                    <img src="https://via.placeholder.com/60" class="story-img">
                    <p>Your Story</p>
                </div>
            </div>

            <div class="create-post">
                <textarea id="postText" placeholder="Swarg mein naya kya hai?"></textarea>
                <button class="main-btn" style="width:auto; padding:8px 20px;" onclick="createPost()">Post Karein</button>
            </div>

            <div id="feed"></div>
        </div>
    </div>

    <script>
        // --- DATA LOGIC ---
        let users = JSON.parse(localStorage.getItem('swarg_users')) || [];
        let posts = JSON.parse(localStorage.getItem('swarg_posts')) || [];
        let currentUser = null;

        // --- AUTH FUNCTIONS ---
        function toggleAuth(type) {
            if(type === 'login') {
                document.getElementById('login-form').classList.remove('hidden');
                document.getElementById('reg-form').classList.add('hidden');
                document.getElementById('loginTab').classList.add('active-tab');
                document.getElementById('regTab').classList.remove('active-tab');
            } else {
                document.getElementById('reg-form').classList.remove('hidden');
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('regTab').classList.add('active-tab');
                document.getElementById('loginTab').classList.remove('active-tab');
            }
        }

        function handleRegister() {
            const name = document.getElementById('regName').value;
            const user = document.getElementById('regUser').value;
            const pass = document.getElementById('regPass').value;
            const dob = document.getElementById('regDob').value;
            const pic = document.getElementById('regPic').value || 'https://via.placeholder.com/40';

            if(!name || !user || !pass) return alert("Please fill all details!");

            const exists = users.find(u => u.username === user);
            if(exists) return alert("Username already taken!");

            const newUser = { name, username: user, password: pass, dob, profilePic: pic };
            users.push(newUser);
            localStorage.setItem('swarg_users', JSON.stringify(users));
            alert("Registration Successful! Now Login.");
            toggleAuth('login');
        }

        function handleLogin() {
            const user = document.getElementById('loginUser').value;
            const pass = document.getElementById('loginPass').value;

            const foundUser = users.find(u => u.username === user && u.password === pass);
            if(foundUser) {
                currentUser = foundUser;
                showApp();
            } else {
                alert("Galat Username ya Password!");
            }
        }

        function handleLogout() {
            currentUser = null;
            document.getElementById('main-app').classList.add('hidden');
            document.getElementById('auth-container').classList.remove('hidden');
        }

        // --- APP LOGIC ---
        function showApp() {
            document.getElementById('auth-container').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            renderFeed();
            loadStories();
        }

        function createPost() {
            const text = document.getElementById('postText').value;
            if(!text.trim()) return;

            const newPost = {
                author: currentUser.name,
                pic: currentUser.profilePic,
                content: text,
                time: new Date().toLocaleString()
            };

            posts.unshift(newPost); // Add to top
            localStorage.setItem('swarg_posts', JSON.stringify(posts));
            document.getElementById('postText').value = '';
            renderFeed();
        }

        function renderFeed() {
            const feedDiv = document.getElementById('feed');
            feedDiv.innerHTML = posts.map(post => `
                <div class="post">
                    <div class="post-header">
                        <img src="${post.pic}" class="post-img">
                        <div>
                            <div>${post.author}</div>
                            <small style="color:gray; font-weight:normal;">${post.time}</small>
                        </div>
                    </div>
                    <div class="post-content">${post.content}</div>
                    <div class="post-actions">
                        <button class="action-btn" onclick="this.style.color='blue'">Like</button>
                        <button class="action-btn">Comment</button>
                        <button class="action-btn">Share</button>
                    </div>
                </div>
            `).join('');
        }

        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const resultsDiv = document.getElementById('search-results');
            
            if(!query) {
                resultsDiv.classList.add('hidden');
                return;
            }

            const filtered = users.filter(u => u.name.toLowerCase().includes(query));
            if(filtered.length > 0) {
                resultsDiv.classList.remove('hidden');
                resultsDiv.innerHTML = filtered.map(u => `<div class="search-item">${u.name} (@${u.username})</div>`).join('');
            } else {
                resultsDiv.innerHTML = '<div class="search-item">No user found</div>';
            }
        }

        function loadStories() {
            const container = document.getElementById('storyContainer');
            // Adding dummy stories for look
            const dummyStories = ["Amit", "Sneha", "Rahul", "Priya"];
            dummyStories.forEach(name => {
                container.innerHTML += `
                    <div class="story-card">
                        <img src="https://i.pravatar.cc/150?u=${name}" class="story-img">
                        <p>${name}</p>
                    </div>
                `;
            });
        }
    </script>
</body>
</html>
